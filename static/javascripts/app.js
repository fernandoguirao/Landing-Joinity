// Generated by CoffeeScript 1.6.3
(function() {
  var $j, hideLoader, isAutoscroll, isBannerAnimated, isCompras, isComprasReservas, isCreacionJoinities, isDonuts, isFirstTime, isHome, isInput, isListaLarga, isLogin, isMuestra, isMuestraFormSiguiente, isNoMiembro, isOculta, isPago, isPasos, isResponderComentario, isReveal, isRightColumn, isSearch, isSubeImagen, isTasks, isUnlogged, isVotacion, isWrite, paginaCompras;

  hideLoader = function(targets) {
    var hijo;
    targets.children('#fadingBarsG').remove();
    hijo = targets.children('.hide-text');
    return hijo.contents().unwrap();
  };

  $('.preloader').each(function() {
    var newPreloader, oldPreloader;
    newPreloader = $('.preloader');
    oldPreloader = $('.ajax-loader #fadingBarsG');
    return newPreloader.click(function() {
      hideLoader($('.preloader #fadingBarsG').parent());
      if ($(this).has('#fadingBarsG').length) {
        return hideLoader($(this));
      } else {
        console.log('preloader desde app.js');
        $(this).wrapInner("<div class='hide-text'></div>");
        return oldPreloader.clone().appendTo($(this));
      }
    });
  });

  $j = jQuery;

  isVotacion = $j('.votacion');

  isBannerAnimated = $j('.more-info');

  isDonuts = $j('.donutchart');

  isPasos = $j('.pasos');

  isSearch = $j('.results-content');

  isTasks = $j('li.task');

  isLogin = $j('.progress-top-bar form.login');

  isHome = $j('.fandfriends');

  isWrite = $j('.write');

  isResponderComentario = $j('.answer');

  isUnlogged = $j('.unlogged');

  isSubeImagen = $j('.isSubeImagen');

  isMuestraFormSiguiente = $j('.muestra-siguiente');

  isComprasReservas = $j('.navRight');

  isCreacionJoinities = $j('.creacionJ');

  isPago = $j('.btnPago');

  isAutoscroll = $j('.auto-scroll');

  isInput = $j('.form-control.normal');

  isWrite = $j('.write');

  isListaLarga = $j('.long-list');

  isReveal = $j('.reveal');

  isRightColumn = $j('.right-column');

  paginaCompras = $j('.ver-cat');

  isCompras = $j('.es-compras');

  isNoMiembro = $j('#panel_unirse');

  isVotacion = $j('.opt-more');

  isMuestra = $j('.muestra-otro');

  isOculta = $j('.oculta-otro');

  isFirstTime = $j('.first-time');

  $j(function() {
    var altura, barBaja, delay, donutfunction, duplicateF, functionTimeOut, i, inputSearch, liFirst, liLast, offsetAfi, offsetCom, offsetFam, offsetHoteles, offsetMarcas, offsetRestaurantes, results, selectp, task, timer, userTask;
    if ($j('.modaljoinity').length > 0) {
      $j('.m-close').click(function() {
        return $j(this).parent().parent().toggleClass('hide');
      });
      $j('.tutorial-link').click(function() {
        return $j('.m-tutorial').toggleClass('hide');
      });
    }
    if (isFirstTime.length > 0) {
      $j("#modal-bienvenida").modal({
        show: true
      });
    }
    if (isMuestra.length > 0) {
      isMuestra.click(function() {
        var muestra;
        muestra = $j(this).data("muestra");
        return $j(muestra).removeClass('hidden');
      });
    }
    if (isOculta.length > 0) {
      isOculta.click(function() {
        var oculta;
        oculta = $j(this).data("oculta");
        return $j(oculta).addClass('hidden');
      });
    }
    if (isVotacion.length > 0) {
      i = 2;
      $j('.opt-more').click(function() {
        i++;
        $j('.opt-n:last').clone().appendTo('.the-opts');
        $j('.opt-n:last').children('input').attr("name", "respuesta_" + i);
        return $j('.opt-n:last').children('input').val('');
      });
    }
    if (isNoMiembro.length > 0) {
      altura = isNoMiembro.height() - 330;
      isNoMiembro.height(altura);
    }
    if (isRightColumn.length > 0) {
      $j('.toggle-right').click(function() {
        isRightColumn.toggleClass('right-closed');
        $j('.reveal').addClass('hidden');
        $j(this).toggleClass('gira');
        $j('.left-bar').addClass('slideBar');
        $j('.menu-hidden .btn.hideLeft').hide();
        return $j('.menu-hidden .btn.showLeft').show();
      });
    }
    if (isReveal.length > 0) {
      $j(isReveal).click(function() {
        $j(this).next().toggleClass('hidden');
        if (paginaCompras.length > 0) {
          $j(this).addClass('hidden');
        }
        if (isCompras.length > 0) {
          return $j(this).addClass('hidden');
        }
      });
    }
    if (selectpickercalled) {
      selectp = $j('.bootstrap-select');
      selectp.each(function() {
        var selectC;
        selectC = $j(this).children('.dropdown-toggle');
        selectC.attr('class', $j(this).attr('class')).removeClass('btn-group bootstrap-select');
        return $j(this).removeClass('btn');
      });
    }
    if (isPago.length > 0) {
      $j('.btnPago').click(function() {
        $j(this).css({
          'display': 'none'
        });
        return $j('.paypago').css({
          'display': 'inherit'
        });
      });
    }
    if (isVotacion.length > 0) {
      $j('.votacion.no-votado .icon-star').hover((function() {
        return $j(this).prevAll().addClass('active');
      }), (function() {
        return $j('.votacion.no-votado .icon-star').removeClass('active');
      }));
    }
    if (isBannerAnimated.length > 0) {
      $j('.more-info.azul').click(function() {
        return $j('.banner').toggleClass('open');
      });
    }
    $j('.infoBar.warning .btn').click(function() {
      $j(this).parent().css({
        'display': 'none'
      });
      return $j('.downBody').css({
        'margin-top': '0'
      });
    });
    if (isDonuts.length > 0) {
      donutfunction = function() {
        var delay, timer;
        $j(".azul .donutchart").donutchart({
          bgColor: "#08705b"
        });
        $j(".rojo .donutchart").donutchart({
          bgColor: "#aa252b"
        });
        $j(".verde .donutchart").donutchart({
          bgColor: "#08705b"
        });
        timer = void 0;
        delay = 400;
        return $j(".joinity-thumb").hover((function() {
          var donut;
          donut = $j(".donutchart", this);
          donut.stop().donutchart("stopanimate");
          return timer = setTimeout(function() {
            return donut.stop().donutchart("animate");
          }, delay);
        }), function() {
          return clearTimeout(timer);
        });
      };
      donutfunction();
    }
    if (isPasos.length > 0) {
      functionTimeOut = function(a) {
        var delay, timer;
        timer = void 0;
        delay = 500;
        return timer = setTimeout(function() {
          return a.addClass('activo');
        }, delay);
      };
      liFirst = $j('.pasos li:first');
      liLast = $j('.pasos li:last');
      $j('.pasos li .play').click((function() {
        var li;
        li = $j(this).parent();
        if (li.is(liFirst)) {
          li.removeClass('activo');
          return functionTimeOut(li.next());
        } else if (li.is(liLast)) {
          li.removeClass('activo');
          return functionTimeOut(liFirst);
        } else {
          li.removeClass('activo');
          return functionTimeOut(li.next());
        }
      }));
      $j('.pasos li .rewind').click((function() {
        var li;
        li = $j(this).parent();
        if (li.is(liFirst)) {
          li.removeClass('activo');
          return functionTimeOut(liLast);
        } else if (li.is(liLast)) {
          li.removeClass('activo');
          return functionTimeOut(li.prev());
        } else {
          li.removeClass('activo');
          return functionTimeOut(li.prev());
        }
      }));
    }
    if (isSearch.length > 0) {
      results = $j('.results-content');
      inputSearch = $j('.modal.fade .giant');
      inputSearch.focus(function() {
        return results.removeClass('oculto');
      });
      $j(document).mouseup(function(e) {
        if (!results.is(e.target) && results.has(e.target).length === 0 && !inputSearch.is(e.target)) {
          return results.addClass('oculto');
        }
      });
    }
    if (isTasks.length > 0) {
      task = $j('li.task');
      userTask = $j('.asignada');
      timer = void 0;
      delay = 200;
      task.hover((function() {
        var etask;
        etask = $j(this);
        return timer = setTimeout(function() {
          return etask.find(userTask).addClass('show');
        }, delay);
      }), function() {
        clearTimeout(timer);
        return userTask.removeClass('show');
      });
    }
    if (isLogin.length > 0) {
      barBaja = function(barra, boton, input, verdad) {
        boton.click(function() {
          var clase;
          barra.addClass('down');
          input.focus();
          if (verdad) {
            clase = $j('.darken');
            return clase.addClass('visible');
          }
        });
        barra.click(function() {
          var clase;
          barra.addClass('down');
          if (verdad) {
            clase = $j('.darken');
            return clase.addClass('visible');
          }
        });
        return $(document).mouseup(function(e) {
          if (!barra.is(e.target) && barra.has(e.target).length === 0) {
            if (verdad) {
              barra.removeClass('down');
              return $j('.darken').removeClass('visible');
            }
          }
        });
      };
      barBaja($j('.progress-top-bar form.login'), $j('.logbtn'), $j('.progress-top-bar form.login .first'), true);
    }
    if ($j(".infoBar").length) {
      $j('body').addClass('downBody');
    }
    if (isHome.length > 0) {
      offsetAfi = $j(".faficiones").offset().top;
      offsetFam = $j(".fandfriends").offset().top;
      offsetCom = $j(".fcompras").offset().top;
      $j(".aficat").click(function() {
        return $j("html,body").animate({
          scrollTop: offsetAfi - 90
        }, 800);
      });
      $j(".compracat").click(function() {
        return $j("html,body").animate({
          scrollTop: offsetCom - 90
        }, 800);
      });
      $j(".famcat").click(function() {
        return $j("html,body").animate({
          scrollTop: offsetFam - 90
        }, 800);
      });
    }
    if (isWrite.length > 0) {
      $j('.write .changeTo').click(function() {
        $j('.photoUpload').removeClass('hide');
        return $j('.write').addClass('hide');
      });
      $j('.photoUpload .changeTo').click(function() {
        $j('.photoUpload').addClass('hide');
        return $j('.write').removeClass('hide');
      });
    }
    if (isResponderComentario.length > 0) {
      $j('.answer').click(function() {
        $j(this).next().removeClass('hide');
        return $j(this).addClass('hide');
      });
    }
    $j('.menu-hidden .btn.showLeft').click(function() {
      $j('.left-bar').removeClass('slideBar');
      $j(this).hide();
      $j('.menu-hidden .btn.hideLeft').css({
        'display': 'inline-block'
      });
      $j('.right-column').addClass('right-closed');
      return $j('.toggle-right').removeClass('gira');
    });
    $j('.menu-hidden .btn.hideLeft').click(function() {
      $j('.left-bar').addClass('slideBar');
      $j(this).hide();
      return $j('.menu-hidden .btn.showLeft').show();
    });
    if (isUnlogged.length > 0) {
      if ($j('.progress-top-bar').hasClass('unlogged')) {
        $j('body').addClass('unlogged');
      }
    }
    if (isSubeImagen.length > 0) {
      $j('.cambiaImagen .img').click(function() {
        $j('.upload').removeClass('existe');
        return $j(this).addClass('existe');
      });
    }
    if (isMuestraFormSiguiente.length > 0) {
      $j('.muestra-siguiente').click(function() {
        $j(this).parent().parent().addClass('hidden');
        return $j(this).parent().parent().next().removeClass('hidden');
      });
    }
    if (isComprasReservas.length > 0) {
      $j('.navRight a').click(function() {
        var offTop;
        if ($j(this).hasClass('c0')) {
          offTop = $j(".navLeft .c0").offset().top;
        }
        if ($j(this).hasClass('c1')) {
          offTop = $j(".navLeft .c1").offset().top;
        }
        if ($j(this).hasClass('c2')) {
          offTop = $j(".navLeft .c2").offset().top;
        }
        if ($j(this).hasClass('c3')) {
          offTop = $j(".navLeft .c3").offset().top;
        }
        return $j("html,body").animate({
          scrollTop: offTop - 30
        }, 800);
      });
    }
    if (isCreacionJoinities.length > 0) {
      duplicateF = function(claseBase) {
        var nombre, nuevo, nuevoInput, numer, numero, numeroArray, numeroString;
        nombre = $j(claseBase).parent().attr('class');
        numeroArray = nombre.split('\_');
        numeroString = numeroArray[1];
        numer = parseInt(numeroString, 10);
        numero = numer + 1;
        nuevo = '<div class="inputG"><div class="inputgrupo' + '_' + numero + '"><input type="hidden" name="n_lugares" value=' + numero + '><input class="form-control normal input' + '_' + numero + '" name="lugar' + '_' + numero + '"><div class="btn amarillo small text-transform"><i class="icon-plus"></i></div></div></div>';
        $j(claseBase).parent().parent().parent().append(nuevo);
        nuevoInput = '.inputgrupo' + '_' + numero;
        return $j(nuevoInput).children('.btn').click(function() {
          $j(this).addClass('hidden');
          return duplicateF(this);
        });
      };
      $j('.inputG').children().children('.btn').click(function() {
        $j(this).addClass('hidden');
        return duplicateF(this);
      });
    }
    if (paginaCompras.length > 0) {
      offsetMarcas = $j(".mmarcas").offset().top;
      offsetRestaurantes = $j(".mrestaurantes").offset().top;
      offsetHoteles = $j(".mhoteles").offset().top;
      $j(".lmarcas").click(function() {
        return $j("html,body").animate({
          scrollTop: offsetMarcas
        }, 800);
      });
      $j(".lrestaurantes").click(function() {
        return $j("html,body").animate({
          scrollTop: offsetRestaurantes
        }, 800);
      });
      $j(".lhoteles").click(function() {
        return $j("html,body").animate({
          scrollTop: offsetHoteles
        }, 800);
      });
    }
    if (isAutoscroll.length > 0) {
      $('.auto-scroll').click(function() {
        var offsetTarget, target;
        event.preventDefault();
        target = $(this).attr('href');
        offsetTarget = $j(target).offset().top;
        return $j("html,body").animate({
          scrollTop: offsetTarget - 90
        }, 800);
      });
    }
    if (isInput.length > 0) {
      $j('<div class="btn small icon-btn clearInput float-right"><i class="icon-remove-circle icon-large"></i></div><div class="clear-both"></div>').insertAfter('.second-column .form-control.normal');
      $j('.clearInput').click(function() {
        $j(this).parent().children('input').val('');
        return $j(this).parent().children('textarea').val('');
      });
    }
    if (isListaLarga.length > 0) {
      return $j('.long-list').each(function() {
        var size, sliceNumber;
        size = $j('li', this).length;
        sliceNumber = 5;
        if (size <= sliceNumber) {
          $j('.load-more', this).parent().hide();
        }
        $j('li.table', this).slice(sliceNumber).css({
          'display': 'none'
        });
        return $j('.load-more', this).click(function() {
          var litable;
          if (size > sliceNumber) {
            litable = $j(this).parent().parent().children('li.table');
            sliceNumber = sliceNumber + 5;
            litable.css({
              'display': 'inherit'
            });
            return litable.slice(sliceNumber).css({
              'display': 'none'
            });
          } else {
            $j(this).text('No hay más resultados');
            return $j(this).fadeTo('slow', 0);
          }
        });
      });
    }
  });

}).call(this);
